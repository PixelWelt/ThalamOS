<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ThalamOS: app Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ThalamOS
   </div>
   <div id="projectbrief">a powerful Flask web application designed to enhance your storage management.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespaceapp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">app Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af4155dae6790c1c78b4fef1eeca11512" id="r_af4155dae6790c1c78b4fef1eeca11512"><td class="memItemLeft" align="right" valign="top">Annotated[str, &quot;search page as a rendered template&quot;]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af4155dae6790c1c78b4fef1eeca11512">index</a> ()</td></tr>
<tr class="separator:af4155dae6790c1c78b4fef1eeca11512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac4e0abbc89b337d90643d472f7c3ad" id="r_aaac4e0abbc89b337d90643d472f7c3ad"><td class="memItemLeft" align="right" valign="top">Annotated[str, &quot;search page as a rendered template&quot;]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaac4e0abbc89b337d90643d472f7c3ad">toggle_light</a> ()</td></tr>
<tr class="separator:aaac4e0abbc89b337d90643d472f7c3ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72b62fd84b2007fecb090a6324c8ddfb" id="r_a72b62fd84b2007fecb090a6324c8ddfb"><td class="memItemLeft" align="right" valign="top">Annotated[str, &quot;item creation page as a rendered template&quot;]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72b62fd84b2007fecb090a6324c8ddfb">create_item</a> ()</td></tr>
<tr class="separator:a72b62fd84b2007fecb090a6324c8ddfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41417b50ad63e44db304b1fb1feb6961" id="r_a41417b50ad63e44db304b1fb1feb6961"><td class="memItemLeft" align="right" valign="top">Annotated[tuple, {&quot;status&quot;:str, &quot;status_code&quot;:int}]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a41417b50ad63e44db304b1fb1feb6961">send_creation</a> ()</td></tr>
<tr class="separator:a41417b50ad63e44db304b1fb1feb6961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace6a8ee6b554f6b29a218b490bfcddd6" id="r_ace6a8ee6b554f6b29a218b490bfcddd6"><td class="memItemLeft" align="right" valign="top">Annotated[str, &quot;item page as a rendered template&quot;]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ace6a8ee6b554f6b29a218b490bfcddd6">item</a> (item_id)</td></tr>
<tr class="separator:ace6a8ee6b554f6b29a218b490bfcddd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6192172608981828671397eb62767202" id="r_a6192172608981828671397eb62767202"><td class="memItemLeft" align="right" valign="top">Annotated[tuple, {&quot;status&quot;:str, &quot;status_code&quot;:int}]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6192172608981828671397eb62767202">update_item</a> (item_id)</td></tr>
<tr class="separator:a6192172608981828671397eb62767202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab2e0d6db7c9abbb307e8e7910adf3cf" id="r_aab2e0d6db7c9abbb307e8e7910adf3cf"><td class="memItemLeft" align="right" valign="top">Annotated[str, &quot;search page as a rendered template&quot;]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aab2e0d6db7c9abbb307e8e7910adf3cf">delete_item</a> (item_id)</td></tr>
<tr class="separator:aab2e0d6db7c9abbb307e8e7910adf3cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64e658d02e2b51faa355a3cc3986efc8" id="r_a64e658d02e2b51faa355a3cc3986efc8"><td class="memItemLeft" align="right" valign="top">Response&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64e658d02e2b51faa355a3cc3986efc8">search</a> (term)</td></tr>
<tr class="separator:a64e658d02e2b51faa355a3cc3986efc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16a0596a94a459d734da46538f5b2bdf" id="r_a16a0596a94a459d734da46538f5b2bdf"><td class="memItemLeft" align="right" valign="top">Exception&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16a0596a94a459d734da46538f5b2bdf">handle_exception</a> (e)</td></tr>
<tr class="separator:a16a0596a94a459d734da46538f5b2bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeed88e7e4abcc9201639952b0b200b7f" id="r_aeed88e7e4abcc9201639952b0b200b7f"><td class="memItemLeft" align="right" valign="top">Response&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeed88e7e4abcc9201639952b0b200b7f">get_env</a> ()</td></tr>
<tr class="separator:aeed88e7e4abcc9201639952b0b200b7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a8f4f80f6f1a78cf8c0ca23268f1bdf" id="r_a6a8f4f80f6f1a78cf8c0ca23268f1bdf"><td class="memItemLeft" align="right" valign="top">tuple[Response, int]|Response&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a8f4f80f6f1a78cf8c0ca23268f1bdf">get_ollama_models</a> ()</td></tr>
<tr class="separator:a6a8f4f80f6f1a78cf8c0ca23268f1bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e92075c2803714379c102748623660" id="r_a77e92075c2803714379c102748623660"><td class="memItemLeft" align="right" valign="top">tuple[Response, int]|Response&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a77e92075c2803714379c102748623660">get_weight</a> ()</td></tr>
<tr class="separator:a77e92075c2803714379c102748623660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b15fbe58e2fafaf1fffc0c31ad9e987" id="r_a0b15fbe58e2fafaf1fffc0c31ad9e987"><td class="memItemLeft" align="right" valign="top">Response&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0b15fbe58e2fafaf1fffc0c31ad9e987">ask_llm_question</a> ()</td></tr>
<tr class="separator:a0b15fbe58e2fafaf1fffc0c31ad9e987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a363580e22c196edbd2a79655b5ac987b" id="r_a363580e22c196edbd2a79655b5ac987b"><td class="memItemLeft" align="right" valign="top">Annotated[tuple, {&quot;status&quot;:str, &quot;status_code&quot;:int}]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a363580e22c196edbd2a79655b5ac987b">log_message</a> ()</td></tr>
<tr class="separator:a363580e22c196edbd2a79655b5ac987b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4f6539932c83e167669e366f14d835e3" id="r_a4f6539932c83e167669e366f14d835e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f6539932c83e167669e366f14d835e3">dotenv_path</a></td></tr>
<tr class="separator:a4f6539932c83e167669e366f14d835e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae54b0e557a8ce632533a30d58b35e713" id="r_ae54b0e557a8ce632533a30d58b35e713"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae54b0e557a8ce632533a30d58b35e713">IS_SCALE_ENABLED</a> = &quot;true&quot;</td></tr>
<tr class="separator:ae54b0e557a8ce632533a30d58b35e713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a675b4ea702c13dc4b8c05f985a25b496" id="r_a675b4ea702c13dc4b8c05f985a25b496"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a675b4ea702c13dc4b8c05f985a25b496">app</a> = Flask(__name__)</td></tr>
<tr class="separator:a675b4ea702c13dc4b8c05f985a25b496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fa7c11c7474c128736b1d34b15a0d5e" id="r_a7fa7c11c7474c128736b1d34b15a0d5e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7fa7c11c7474c128736b1d34b15a0d5e">host</a></td></tr>
<tr class="separator:a7fa7c11c7474c128736b1d34b15a0d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a362027d4aa3246e0e0f57ebf177b0" id="r_ab4a362027d4aa3246e0e0f57ebf177b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab4a362027d4aa3246e0e0f57ebf177b0">debug</a></td></tr>
<tr class="separator:ab4a362027d4aa3246e0e0f57ebf177b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">ThalamOS Application

This module sets up a Flask web application for managing storage items, controlling WLED devices,
interacting with a WiFi scale, and querying an LLM service. It provides various routes for rendering templates,
handling item creation, deletion, and search, as well as retrieving environment configurations,
scale weight, and logging messages.

Routes:
    - /: Renders the search page.
    - /toggleLight: Toggles the power state of the WLED device and renders the search template.
    - /createItem: Renders the template for creating a new item.
    - /sendCreation: Handles the creation of a new item by processing the incoming JSON request data.
    - /item/&lt;item_id&gt;: Handles the request to display an item.
    - /item/&lt;item_id&gt;/update: Updates an item using the Storage_connector and returns a status message.
    - /item/&lt;item_id&gt;/delete: Deletes an item using the Storage_connector and renders the search.html template.
    - /search/&lt;term&gt;: Searches for a term in the storage and returns the results in JSON format.
    - /config/env: Retrieves the environment configuration.
    - /config/ollama/models: Fetches the list of available Ollama models.
    - /wifiscale/weight: Retrieves the weight of the scale.
    - /llm/ask: Asks a question to the LLM service and returns the response.
    - /log: Logs a message with a specified log level.

Error Handling:
    - handle_exception: Handles exceptions by passing through HTTP errors.

Setup:
    - Initializes the Flask app and sets up CORS.
    - Loads environment variables from a .env file.
    - Sets up the Storage_connector within the app context.

Usage:
    Run the application using the command `python app.py`.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a0b15fbe58e2fafaf1fffc0c31ad9e987" name="a0b15fbe58e2fafaf1fffc0c31ad9e987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b15fbe58e2fafaf1fffc0c31ad9e987">&#9670;&#160;</a></span>ask_llm_question()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Response app.ask_llm_question </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Ask a question to the Language Learning Model (LLM) service.
This function sends a GET request to the LLM service at the specified endpoint
and returns the response as a JSON object.
Returns:
    Response: A Flask JSON response containing the response from the LLM service.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00274">274</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  274</span><span class="keyword">def </span>ask_llm_question() -&gt; Response:</div>
<div class="line"><span class="lineno">  275</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  276</span><span class="stringliteral">    Ask a question to the Language Learning Model (LLM) service.</span></div>
<div class="line"><span class="lineno">  277</span><span class="stringliteral">    This function sends a GET request to the LLM service at the specified endpoint</span></div>
<div class="line"><span class="lineno">  278</span><span class="stringliteral">    and returns the response as a JSON object.</span></div>
<div class="line"><span class="lineno">  279</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  280</span><span class="stringliteral">        Response: A Flask JSON response containing the response from the LLM service.</span></div>
<div class="line"><span class="lineno">  281</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  282</span>    data = request.get_json()</div>
<div class="line"><span class="lineno">  283</span>    question = data.get(<span class="stringliteral">&quot;question&quot;</span>)</div>
<div class="line"><span class="lineno">  284</span>    logger.info(f<span class="stringliteral">&quot;Received question via llm endpoint: {question}&quot;</span>)</div>
<div class="line"><span class="lineno">  285</span>    response = ollama.ask_question(question)</div>
<div class="line"><span class="lineno">  286</span>    <span class="keywordflow">return</span> jsonify(response)</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span><span class="preprocessor">@app.route(&quot;/log&quot;, methods=[&quot;POST&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a72b62fd84b2007fecb090a6324c8ddfb" name="a72b62fd84b2007fecb090a6324c8ddfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72b62fd84b2007fecb090a6324c8ddfb">&#9670;&#160;</a></span>create_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[str, &quot;item creation page as a rendered template&quot;] app.create_item </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Renders the template for creating a new item.
Returns:
    Response: The rendered HTML template for creating a new item.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00090">90</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span><span class="keyword">def </span>create_item() -&gt; Annotated[str, &quot;item creation page as a rendered template&quot;]:</div>
<div class="line"><span class="lineno">   91</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">    Renders the template for creating a new item.</span></div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral">        Response: The rendered HTML template for creating a new item.</span></div>
<div class="line"><span class="lineno">   95</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">return</span> render_template(<span class="stringliteral">&quot;createItem.html&quot;</span>)</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span><span class="preprocessor">@app.route(&quot;/sendCreation&quot;, methods=[&quot;POST&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab2e0d6db7c9abbb307e8e7910adf3cf" name="aab2e0d6db7c9abbb307e8e7910adf3cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab2e0d6db7c9abbb307e8e7910adf3cf">&#9670;&#160;</a></span>delete_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[str, &quot;search page as a rendered template&quot;] app.delete_item </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>item_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Deletes an item using the Storage_connector and renders the search.html template.
Args:
    item_id: The id of the item to be deleted.
Returns:
    A rendered template for the search page.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00191">191</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  191</span><span class="keyword">def </span>delete_item(item_id) -&gt; Annotated[str, &quot;search page as a rendered template&quot;]:</div>
<div class="line"><span class="lineno">  192</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  193</span><span class="stringliteral">    Deletes an item using the Storage_connector and renders the search.html template.</span></div>
<div class="line"><span class="lineno">  194</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  195</span><span class="stringliteral">        item_id: The id of the item to be deleted.</span></div>
<div class="line"><span class="lineno">  196</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  197</span><span class="stringliteral">        A rendered template for the search page.</span></div>
<div class="line"><span class="lineno">  198</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    <a class="code hl_function" href="namespaceStorage__connector.html#ac5db0c7074c7f024ca28e501598863c3">Storage_connector.delete_item</a>(item_id)</div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">return</span> render_template(<span class="stringliteral">&quot;search.html&quot;</span>)</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span><span class="preprocessor">@app.route(&quot;/search/&lt;term&gt;&quot;, methods=[&quot;GET&quot;])</span></div>
<div class="ttc" id="anamespaceStorage__connector_html_ac5db0c7074c7f024ca28e501598863c3"><div class="ttname"><a href="namespaceStorage__connector.html#ac5db0c7074c7f024ca28e501598863c3">Storage_connector.delete_item</a></div><div class="ttdeci">None delete_item(item_id)</div><div class="ttdef"><b>Definition</b> <a href="Storage__connector_8py_source.html#l00115">Storage_connector.py:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeed88e7e4abcc9201639952b0b200b7f" name="aeed88e7e4abcc9201639952b0b200b7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeed88e7e4abcc9201639952b0b200b7f">&#9670;&#160;</a></span>get_env()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Response app.get_env </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Retrieve the environment configuration.
This function uses the config_manager to get the current environment
configuration and returns it as a JSON response.
Returns:
    Response: A Flask JSON response containing the environment configuration.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00232">232</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  232</span><span class="keyword">def </span>get_env() -&gt; Response:</div>
<div class="line"><span class="lineno">  233</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  234</span><span class="stringliteral">    Retrieve the environment configuration.</span></div>
<div class="line"><span class="lineno">  235</span><span class="stringliteral">    This function uses the config_manager to get the current environment</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">    configuration and returns it as a JSON response.</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">        Response: A Flask JSON response containing the environment configuration.</span></div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">return</span> jsonify(<a class="code hl_function" href="namespaceconfig__manager.html#aecf4ba123aecccca95951b75c602497b">config_manager.get_env</a>())</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span><span class="preprocessor">@app.route(&quot;/config/ollama/models&quot;)</span></div>
<div class="ttc" id="anamespaceconfig__manager_html_aecf4ba123aecccca95951b75c602497b"><div class="ttname"><a href="namespaceconfig__manager.html#aecf4ba123aecccca95951b75c602497b">config_manager.get_env</a></div><div class="ttdeci">Annotated[dict, &quot;dictionary of environment variables&quot;] get_env()</div><div class="ttdef"><b>Definition</b> <a href="config__manager_8py_source.html#l00034">config_manager.py:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a8f4f80f6f1a78cf8c0ca23268f1bdf" name="a6a8f4f80f6f1a78cf8c0ca23268f1bdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a8f4f80f6f1a78cf8c0ca23268f1bdf">&#9670;&#160;</a></span>get_ollama_models()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> tuple[Response, int] | Response app.get_ollama_models </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Fetches the list of available Ollama models.
Returns:
    Annotated[str, "json response"]: A JSON response containing the list of Ollama models.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00244">244</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  244</span><span class="keyword">def </span>get_ollama_models() -&gt; tuple[Response, int] | Response:</div>
<div class="line"><span class="lineno">  245</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">    Fetches the list of available Ollama models.</span></div>
<div class="line"><span class="lineno">  247</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  248</span><span class="stringliteral">        Annotated[str, &quot;json response&quot;]: A JSON response containing the list of Ollama models.</span></div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  250</span>    values = ollama.get_ollama_models()</div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> values:</div>
<div class="line"><span class="lineno">  252</span>        <span class="keywordflow">return</span> jsonify({<span class="stringliteral">&quot;status&quot;</span>: <span class="stringliteral">&quot;Ollama service is not enabled&quot;</span>}), 412</div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordflow">return</span> jsonify(values)</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span><span class="preprocessor">@app.route(&quot;/wifiscale/weight&quot;)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77e92075c2803714379c102748623660" name="a77e92075c2803714379c102748623660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77e92075c2803714379c102748623660">&#9670;&#160;</a></span>get_weight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> tuple[Response, int] | Response app.get_weight </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Retrieve the weight of the scale.
This function checks if the scale service is enabled by reading the IS_SCALE_ENABLED environment variable.
If the scale service is not enabled, it returns a JSON response with a status message and HTTP status code 412.
If the scale service is enabled, it uses the wifiscale module to get the weight of the scale and returns it as a JSON response.
Returns:
    Response: A Flask JSON response containing the weight of the scale or a status message.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00257">257</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  257</span><span class="keyword">def </span>get_weight() -&gt; tuple[Response, int] | Response:</div>
<div class="line"><span class="lineno">  258</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  259</span><span class="stringliteral">    Retrieve the weight of the scale.</span></div>
<div class="line"><span class="lineno">  260</span><span class="stringliteral">    This function checks if the scale service is enabled by reading the IS_SCALE_ENABLED environment variable.</span></div>
<div class="line"><span class="lineno">  261</span><span class="stringliteral">    If the scale service is not enabled, it returns a JSON response with a status message and HTTP status code 412.</span></div>
<div class="line"><span class="lineno">  262</span><span class="stringliteral">    If the scale service is enabled, it uses the wifiscale module to get the weight of the scale and returns it as a JSON response.</span></div>
<div class="line"><span class="lineno">  263</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  264</span><span class="stringliteral">        Response: A Flask JSON response containing the weight of the scale or a status message.</span></div>
<div class="line"><span class="lineno">  265</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordflow">if</span> IS_SCALE_ENABLED == <span class="stringliteral">&quot;False&quot;</span>:</div>
<div class="line"><span class="lineno">  267</span>        <span class="keywordflow">return</span> jsonify({<span class="stringliteral">&quot;status&quot;</span>: <span class="stringliteral">&quot;scale service is not enabled&quot;</span>}), 412</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>    weight = wifiscale.get_weight()</div>
<div class="line"><span class="lineno">  270</span>    <span class="keywordflow">return</span> jsonify({<span class="stringliteral">&quot;weight&quot;</span>: weight})</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span><span class="preprocessor">@app.route(&quot;/llm/ask&quot;, methods=[&quot;POST&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16a0596a94a459d734da46538f5b2bdf" name="a16a0596a94a459d734da46538f5b2bdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16a0596a94a459d734da46538f5b2bdf">&#9670;&#160;</a></span>handle_exception()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Exception app.handle_exception </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>e</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Handles exceptions by passing through HTTP errors.
Parameters:
e (Exception): The exception to handle.
Returns:
Exception: The same exception that was passed in.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00218">218</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  218</span><span class="keyword">def </span>handle_exception(e) -&gt; Exception:</div>
<div class="line"><span class="lineno">  219</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  220</span><span class="stringliteral">    Handles exceptions by passing through HTTP errors.</span></div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral">    Parameters:</span></div>
<div class="line"><span class="lineno">  222</span><span class="stringliteral">    e (Exception): The exception to handle.</span></div>
<div class="line"><span class="lineno">  223</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  224</span><span class="stringliteral">    Exception: The same exception that was passed in.</span></div>
<div class="line"><span class="lineno">  225</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>    <span class="comment"># pass through HTTP errors</span></div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">return</span> e</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span><span class="preprocessor">@app.route(&quot;/config/env&quot;)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4155dae6790c1c78b4fef1eeca11512" name="af4155dae6790c1c78b4fef1eeca11512"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4155dae6790c1c78b4fef1eeca11512">&#9670;&#160;</a></span>index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[str, &quot;search page as a rendered template&quot;] app.index </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Renders the search page.
Returns:
    Response: The rendered HTML template for the search page.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00065">65</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span><span class="keyword">def </span>index() -&gt; Annotated[str, &quot;search page as a rendered template&quot;]:</div>
<div class="line"><span class="lineno">   66</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral">    Renders the search page.</span></div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">        Response: The rendered HTML template for the search page.</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">return</span> render_template(<span class="stringliteral">&quot;search.html&quot;</span>)</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span><span class="preprocessor">@app.route(&quot;/toggleLight&quot;)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace6a8ee6b554f6b29a218b490bfcddd6" name="ace6a8ee6b554f6b29a218b490bfcddd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace6a8ee6b554f6b29a218b490bfcddd6">&#9670;&#160;</a></span>item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[str, &quot;item page as a rendered template&quot;] app.item </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>item_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Handles the request to display an item.
This function performs the following steps:
1. Changes the power state of the WLED device to on.
2. Fetches the item details from the storage using the provided item identifier.
3. Sets the color position on the WLED device based on the fetched item details.
4. If the fetched item contains additional information,
   it parses the data and renders the 'item.jinja2' template
   with the item details and information.
6. If the fetched item does not contain additional information,
   it renders the 'item.jinja2' template with only the item details.
Args:
    item_id (int): The id of the item to display.
Returns:
    The rendered HTML template for the item.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00137">137</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  137</span><span class="keyword">def </span>item(item_id) -&gt; Annotated[str, &quot;item page as a rendered template&quot;]:</div>
<div class="line"><span class="lineno">  138</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">    Handles the request to display an item.</span></div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">    This function performs the following steps:</span></div>
<div class="line"><span class="lineno">  141</span><span class="stringliteral">    1. Changes the power state of the WLED device to on.</span></div>
<div class="line"><span class="lineno">  142</span><span class="stringliteral">    2. Fetches the item details from the storage using the provided item identifier.</span></div>
<div class="line"><span class="lineno">  143</span><span class="stringliteral">    3. Sets the color position on the WLED device based on the fetched item details.</span></div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral">    4. If the fetched item contains additional information,</span></div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">       it parses the data and renders the &#39;item.jinja2&#39; template</span></div>
<div class="line"><span class="lineno">  146</span><span class="stringliteral">       with the item details and information.</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral">    6. If the fetched item does not contain additional information,</span></div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">       it renders the &#39;item.jinja2&#39; template with only the item details.</span></div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">        item_id (int): The id of the item to display.</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">        The rendered HTML template for the item.</span></div>
<div class="line"><span class="lineno">  153</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  154</span>    <a class="code hl_function" href="namespacewled__requests.html#a4f0df23e4a6b61257c29db6968d45790">wled_requests.change_power_state</a>(<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  155</span>    item_sql = <a class="code hl_function" href="namespaceStorage__connector.html#ac9ef5fceb894ceceab4ab8ff2c23c90b">Storage_connector.fetch_item</a>(item_id)</div>
<div class="line"><span class="lineno">  156</span>    <a class="code hl_function" href="namespacewled__requests.html#af22fdc60671a77f5e14ee545207222eb">wled_requests.color_pos</a>(item_sql[1])</div>
<div class="line"><span class="lineno">  157</span>    logger.info(f<span class="stringliteral">&quot;Fetched item details for item_id {item_id}: {item_sql}&quot;</span>)</div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">if</span> item_sql[4]:</div>
<div class="line"><span class="lineno">  159</span>        json_info = json.loads(item_sql[4])</div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">return</span> render_template(<span class="stringliteral">&quot;item.jinja2&quot;</span>, item=item_sql, json=json_info, id=item_id)</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">return</span> render_template(<span class="stringliteral">&quot;item.jinja2&quot;</span>, item=item_sql, id=item_id)</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span><span class="preprocessor">@app.route(&quot;/item/&lt;item_id&gt;/update&quot;, methods=[&quot;POST&quot;])</span></div>
<div class="ttc" id="anamespaceStorage__connector_html_ac9ef5fceb894ceceab4ab8ff2c23c90b"><div class="ttname"><a href="namespaceStorage__connector.html#ac9ef5fceb894ceceab4ab8ff2c23c90b">Storage_connector.fetch_item</a></div><div class="ttdeci">Annotated[tuple, &quot;tuple containing the item&#39;s data if found, otherwise None&quot;] fetch_item(item_id)</div><div class="ttdef"><b>Definition</b> <a href="Storage__connector_8py_source.html#l00100">Storage_connector.py:102</a></div></div>
<div class="ttc" id="anamespacewled__requests_html_a4f0df23e4a6b61257c29db6968d45790"><div class="ttname"><a href="namespacewled__requests.html#a4f0df23e4a6b61257c29db6968d45790">wled_requests.change_power_state</a></div><div class="ttdeci">None change_power_state(state)</div><div class="ttdef"><b>Definition</b> <a href="wled__requests_8py_source.html#l00071">wled_requests.py:71</a></div></div>
<div class="ttc" id="anamespacewled__requests_html_af22fdc60671a77f5e14ee545207222eb"><div class="ttname"><a href="namespacewled__requests.html#af22fdc60671a77f5e14ee545207222eb">wled_requests.color_pos</a></div><div class="ttdeci">None color_pos(int pos)</div><div class="ttdef"><b>Definition</b> <a href="wled__requests_8py_source.html#l00048">wled_requests.py:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a363580e22c196edbd2a79655b5ac987b" name="a363580e22c196edbd2a79655b5ac987b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a363580e22c196edbd2a79655b5ac987b">&#9670;&#160;</a></span>log_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[tuple, {&quot;status&quot;: str, &quot;status_code&quot;: int}] app.log_message </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Logs a message with a specified log level.

The log level and message content are extracted from the JSON payload of the request.
If the log level is not provided, it defaults to 'INFO'.
If the message content is not provided, it defaults to an empty string.

Returns:
    tuple: A dictionary with a status message and an HTTP status code 201.

Request JSON structure:
    {
        "level": "DEBUG" | "INFO" | "WARNING" | "ERROR" | "CRITICAL",
        "message": "Your log message here"
    }
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00290">290</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  290</span><span class="keyword">def </span>log_message() -&gt; Annotated[tuple, {&quot;status&quot;: str, <span class="stringliteral">&quot;status_code&quot;</span>: int}]:</div>
<div class="line"><span class="lineno">  291</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  292</span><span class="stringliteral">    Logs a message with a specified log level.</span></div>
<div class="line"><span class="lineno">  293</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  294</span><span class="stringliteral">    The log level and message content are extracted from the JSON payload of the request.</span></div>
<div class="line"><span class="lineno">  295</span><span class="stringliteral">    If the log level is not provided, it defaults to &#39;INFO&#39;.</span></div>
<div class="line"><span class="lineno">  296</span><span class="stringliteral">    If the message content is not provided, it defaults to an empty string.</span></div>
<div class="line"><span class="lineno">  297</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  298</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  299</span><span class="stringliteral">        tuple: A dictionary with a status message and an HTTP status code 201.</span></div>
<div class="line"><span class="lineno">  300</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  301</span><span class="stringliteral">    Request JSON structure:</span></div>
<div class="line"><span class="lineno">  302</span><span class="stringliteral">        {</span></div>
<div class="line"><span class="lineno">  303</span><span class="stringliteral">            &quot;level&quot;: &quot;DEBUG&quot; | &quot;INFO&quot; | &quot;WARNING&quot; | &quot;ERROR&quot; | &quot;CRITICAL&quot;,</span></div>
<div class="line"><span class="lineno">  304</span><span class="stringliteral">            &quot;message&quot;: &quot;Your log message here&quot;</span></div>
<div class="line"><span class="lineno">  305</span><span class="stringliteral">        }</span></div>
<div class="line"><span class="lineno">  306</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>    data: Annotated[str, <span class="stringliteral">&quot;content of request&quot;</span>] = request.json</div>
<div class="line"><span class="lineno">  309</span>    level: Annotated[str, <span class="stringliteral">&quot;log level, default value is INFO&quot;</span>] = data.get(</div>
<div class="line"><span class="lineno">  310</span>        <span class="stringliteral">&quot;level&quot;</span>, <span class="stringliteral">&quot;INFO&quot;</span></div>
<div class="line"><span class="lineno">  311</span>    )</div>
<div class="line"><span class="lineno">  312</span>    message: Annotated[str, <span class="stringliteral">&quot;content of log, default value is empty&quot;</span>] = data.get(</div>
<div class="line"><span class="lineno">  313</span>        <span class="stringliteral">&quot;message&quot;</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  314</span>    )</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>    match level:</div>
<div class="line"><span class="lineno">  317</span>        case <span class="stringliteral">&quot;DEBUG&quot;</span>:</div>
<div class="line"><span class="lineno">  318</span>            logger.debug(message)</div>
<div class="line"><span class="lineno">  319</span>        case <span class="stringliteral">&quot;INFO&quot;</span>:</div>
<div class="line"><span class="lineno">  320</span>            logger.info(message)</div>
<div class="line"><span class="lineno">  321</span>        case <span class="stringliteral">&quot;WARNING&quot;</span>:</div>
<div class="line"><span class="lineno">  322</span>            logger.warning(message)</div>
<div class="line"><span class="lineno">  323</span>        case <span class="stringliteral">&quot;ERROR&quot;</span>:</div>
<div class="line"><span class="lineno">  324</span>            logger.error(message)</div>
<div class="line"><span class="lineno">  325</span>        case <span class="stringliteral">&quot;CRITICAL&quot;</span>:</div>
<div class="line"><span class="lineno">  326</span>            logger.critical(message)</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">return</span> {<span class="stringliteral">&quot;status&quot;</span>: <span class="stringliteral">&quot;created&quot;</span>}, 201</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a64e658d02e2b51faa355a3cc3986efc8" name="a64e658d02e2b51faa355a3cc3986efc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64e658d02e2b51faa355a3cc3986efc8">&#9670;&#160;</a></span>search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Response app.search </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>term</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Search for a term in the storage and return the results in JSON format.
Args:
    term (str): The term to search for in the storage.
Returns:
    Response: A Flask Response object containing the search results in JSON format.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00205">205</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  205</span><span class="keyword">def </span>search(term) -&gt; Response:</div>
<div class="line"><span class="lineno">  206</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  207</span><span class="stringliteral">    Search for a term in the storage and return the results in JSON format.</span></div>
<div class="line"><span class="lineno">  208</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">        term (str): The term to search for in the storage.</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  211</span><span class="stringliteral">        Response: A Flask Response object containing the search results in JSON format.</span></div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  213</span>    data = <a class="code hl_function" href="namespaceStorage__connector.html#ab5389b4171d60c4f986084f96fba404d">Storage_connector.search</a>(term)</div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">return</span> jsonify(data)</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span><span class="preprocessor">@app.errorhandler(Exception)</span></div>
<div class="ttc" id="anamespaceStorage__connector_html_ab5389b4171d60c4f986084f96fba404d"><div class="ttname"><a href="namespaceStorage__connector.html#ab5389b4171d60c4f986084f96fba404d">Storage_connector.search</a></div><div class="ttdeci">Annotated[ list, &quot;list of tuples containing the rows from the database that match the search criteria&quot;,] search(search_term)</div><div class="ttdef"><b>Definition</b> <a href="Storage__connector_8py_source.html#l00159">Storage_connector.py:164</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41417b50ad63e44db304b1fb1feb6961" name="a41417b50ad63e44db304b1fb1feb6961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41417b50ad63e44db304b1fb1feb6961">&#9670;&#160;</a></span>send_creation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[tuple, {&quot;status&quot;: str, &quot;status_code&quot;: int}] app.send_creation </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Handle the creation of a new item by processing the incoming JSON request data.
The function expects a JSON payload with the following structure:
{
    "info": &lt;json&gt;,
    "type": &lt;str&gt;,
    "name": &lt;str&gt;,
    "position": &lt;str&gt;
}
It extracts the necessary information from the JSON payload and attempts to create a new item
using the Storage_connector.CreateItem method.
If an exception occurs during the creation process,
it prints the exception.
Returns:
    tuple: A dictionary with a status message and an HTTP status code.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00100">100</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  100</span><span class="keyword">def </span>send_creation() -&gt; Annotated[tuple, {&quot;status&quot;: str, <span class="stringliteral">&quot;status_code&quot;</span>: int}]:</div>
<div class="line"><span class="lineno">  101</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">    Handle the creation of a new item by processing the incoming JSON request data.</span></div>
<div class="line"><span class="lineno">  103</span><span class="stringliteral">    The function expects a JSON payload with the following structure:</span></div>
<div class="line"><span class="lineno">  104</span><span class="stringliteral">    {</span></div>
<div class="line"><span class="lineno">  105</span><span class="stringliteral">        &quot;info&quot;: &lt;json&gt;,</span></div>
<div class="line"><span class="lineno">  106</span><span class="stringliteral">        &quot;type&quot;: &lt;str&gt;,</span></div>
<div class="line"><span class="lineno">  107</span><span class="stringliteral">        &quot;name&quot;: &lt;str&gt;,</span></div>
<div class="line"><span class="lineno">  108</span><span class="stringliteral">        &quot;position&quot;: &lt;str&gt;</span></div>
<div class="line"><span class="lineno">  109</span><span class="stringliteral">    }</span></div>
<div class="line"><span class="lineno">  110</span><span class="stringliteral">    It extracts the necessary information from the JSON payload and attempts to create a new item</span></div>
<div class="line"><span class="lineno">  111</span><span class="stringliteral">    using the Storage_connector.CreateItem method.</span></div>
<div class="line"><span class="lineno">  112</span><span class="stringliteral">    If an exception occurs during the creation process,</span></div>
<div class="line"><span class="lineno">  113</span><span class="stringliteral">    it prints the exception.</span></div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">        tuple: A dictionary with a status message and an HTTP status code.</span></div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    data = request.get_json()</div>
<div class="line"><span class="lineno">  119</span>    logger.info(f<span class="stringliteral">&quot;Received creation request with data: {data}&quot;</span>)</div>
<div class="line"><span class="lineno">  120</span>    info = json.dumps(data[<span class="stringliteral">&quot;info&quot;</span>])</div>
<div class="line"><span class="lineno">  121</span>    obj_type = data[<span class="stringliteral">&quot;type&quot;</span>]</div>
<div class="line"><span class="lineno">  122</span>    name = data[<span class="stringliteral">&quot;name&quot;</span>]</div>
<div class="line"><span class="lineno">  123</span>    pos = data[<span class="stringliteral">&quot;position&quot;</span>]</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  125</span>        <a class="code hl_function" href="namespaceStorage__connector.html#abc8d506980d0690835598342c10b574a">Storage_connector.create_item</a>(</div>
<div class="line"><span class="lineno">  126</span>            pos=pos, obj_type=obj_type, name=name, json_data=info</div>
<div class="line"><span class="lineno">  127</span>        )</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  129</span>        logger.error(</div>
<div class="line"><span class="lineno">  130</span>            f<span class="stringliteral">&quot;Failed to create item with name: {name}, type: {obj_type}, position: {pos}. Error: {e}&quot;</span></div>
<div class="line"><span class="lineno">  131</span>        )</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">return</span> {<span class="stringliteral">&quot;status&quot;</span>: <span class="stringliteral">&quot;error&quot;</span>}, 500</div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordflow">return</span> {<span class="stringliteral">&quot;status&quot;</span>: <span class="stringliteral">&quot;created&quot;</span>}, 201</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span><span class="preprocessor">@app.route(&quot;/item/&lt;item_id&gt;&quot;)</span></div>
<div class="ttc" id="anamespaceStorage__connector_html_abc8d506980d0690835598342c10b574a"><div class="ttname"><a href="namespaceStorage__connector.html#abc8d506980d0690835598342c10b574a">Storage_connector.create_item</a></div><div class="ttdeci">None create_item(pos, obj_type, name, json_data)</div><div class="ttdef"><b>Definition</b> <a href="Storage__connector_8py_source.html#l00128">Storage_connector.py:128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaac4e0abbc89b337d90643d472f7c3ad" name="aaac4e0abbc89b337d90643d472f7c3ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaac4e0abbc89b337d90643d472f7c3ad">&#9670;&#160;</a></span>toggle_light()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[str, &quot;search page as a rendered template&quot;] app.toggle_light </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Toggles the power state of the WLED device and renders the search template.
This function changes the power state of the WLED device to the opposite of its current state
by calling the `changePowerState` method of the `wled_requests` object.
After toggling the power state,
it returns the rendered "search.html" template.
Returns:
    str: The rendered "search.html" template.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00075">75</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span><span class="keyword">def </span>toggle_light() -&gt; Annotated[str, &quot;search page as a rendered template&quot;]:</div>
<div class="line"><span class="lineno">   76</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">    Toggles the power state of the WLED device and renders the search template.</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">    This function changes the power state of the WLED device to the opposite of its current state</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">    by calling the `changePowerState` method of the `wled_requests` object.</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">    After toggling the power state,</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral">    it returns the rendered &quot;search.html&quot; template.</span></div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">        str: The rendered &quot;search.html&quot; template.</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   85</span>    <a class="code hl_function" href="namespacewled__requests.html#a4f0df23e4a6b61257c29db6968d45790">wled_requests.change_power_state</a>(<span class="keywordflow">not</span> <a class="code hl_function" href="namespacewled__requests.html#a2f5bf7ec6957d74f1ea0646d54e6165d">wled_requests.get_power_state</a>())</div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">return</span> render_template(<span class="stringliteral">&quot;search.html&quot;</span>)</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span><span class="preprocessor">@app.route(&quot;/createItem&quot;)</span></div>
<div class="ttc" id="anamespacewled__requests_html_a2f5bf7ec6957d74f1ea0646d54e6165d"><div class="ttname"><a href="namespacewled__requests.html#a2f5bf7ec6957d74f1ea0646d54e6165d">wled_requests.get_power_state</a></div><div class="ttdeci">Annotated[bool, &quot;True if power is on, false if power is off&quot;] get_power_state()</div><div class="ttdef"><b>Definition</b> <a href="wled__requests_8py_source.html#l00083">wled_requests.py:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6192172608981828671397eb62767202" name="a6192172608981828671397eb62767202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6192172608981828671397eb62767202">&#9670;&#160;</a></span>update_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[tuple, {&quot;status&quot;: str, &quot;status_code&quot;: int}] app.update_item </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>item_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Updates an item using the Storage_connector and returns a status message.
Args:
    item_id: The id of the item to be updated.
Returns:
    A dictionary with a status message and an HTTP status code.
</pre> 
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00166">166</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  166</span><span class="keyword">def </span>update_item(item_id) -&gt; Annotated[tuple, {&quot;status&quot;: str, <span class="stringliteral">&quot;status_code&quot;</span>: int}]:</div>
<div class="line"><span class="lineno">  167</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  168</span><span class="stringliteral">    Updates an item using the Storage_connector and returns a status message.</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">        item_id: The id of the item to be updated.</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">        A dictionary with a status message and an HTTP status code.</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  174</span>    data = request.get_json()</div>
<div class="line"><span class="lineno">  175</span>    logger.info(f<span class="stringliteral">&quot;Received update request for item_id {item_id} with data: {data}&quot;</span>)</div>
<div class="line"><span class="lineno">  176</span>    info = json.dumps(data.get(<span class="stringliteral">&quot;info&quot;</span>, {}))</div>
<div class="line"><span class="lineno">  177</span>    obj_type = data.get(<span class="stringliteral">&quot;type&quot;</span>)</div>
<div class="line"><span class="lineno">  178</span>    name = data.get(<span class="stringliteral">&quot;name&quot;</span>)</div>
<div class="line"><span class="lineno">  179</span>    pos = data.get(<span class="stringliteral">&quot;position&quot;</span>)</div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  181</span>        <a class="code hl_function" href="namespaceStorage__connector.html#ae944c67f73d1d668f527caa990370f96">Storage_connector.update_item</a>(</div>
<div class="line"><span class="lineno">  182</span>            item_id=item_id, pos=pos, obj_type=obj_type, name=name, json_data=info</div>
<div class="line"><span class="lineno">  183</span>        )</div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  185</span>        logger.error(f<span class="stringliteral">&quot;Failed to update item with id: {item_id}. Error: {e}&quot;</span>)</div>
<div class="line"><span class="lineno">  186</span>        <span class="keywordflow">return</span> {<span class="stringliteral">&quot;status&quot;</span>: <span class="stringliteral">&quot;error&quot;</span>}, 500</div>
<div class="line"><span class="lineno">  187</span>    <span class="keywordflow">return</span> {<span class="stringliteral">&quot;status&quot;</span>: <span class="stringliteral">&quot;updated&quot;</span>}, 200</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span><span class="preprocessor">@app.route(&quot;/item/&lt;item&gt;/delete&quot;)</span></div>
<div class="ttc" id="anamespaceStorage__connector_html_ae944c67f73d1d668f527caa990370f96"><div class="ttname"><a href="namespaceStorage__connector.html#ae944c67f73d1d668f527caa990370f96">Storage_connector.update_item</a></div><div class="ttdeci">None update_item(item_id, pos, obj_type, name, json_data)</div><div class="ttdef"><b>Definition</b> <a href="Storage__connector_8py_source.html#l00208">Storage_connector.py:208</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a675b4ea702c13dc4b8c05f985a25b496" name="a675b4ea702c13dc4b8c05f985a25b496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a675b4ea702c13dc4b8c05f985a25b496">&#9670;&#160;</a></span>app</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.app = Flask(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00060">60</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="ab4a362027d4aa3246e0e0f57ebf177b0" name="ab4a362027d4aa3246e0e0f57ebf177b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4a362027d4aa3246e0e0f57ebf177b0">&#9670;&#160;</a></span>debug</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.debug</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00336">336</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a4f6539932c83e167669e366f14d835e3" name="a4f6539932c83e167669e366f14d835e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f6539932c83e167669e366f14d835e3">&#9670;&#160;</a></span>dotenv_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.dotenv_path</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00058">58</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a7fa7c11c7474c128736b1d34b15a0d5e" name="a7fa7c11c7474c128736b1d34b15a0d5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fa7c11c7474c128736b1d34b15a0d5e">&#9670;&#160;</a></span>host</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.host</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00336">336</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="ae54b0e557a8ce632533a30d58b35e713" name="ae54b0e557a8ce632533a30d58b35e713"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae54b0e557a8ce632533a30d58b35e713">&#9670;&#160;</a></span>IS_SCALE_ENABLED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">str app.IS_SCALE_ENABLED = &quot;true&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00059">59</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceapp.html">app</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
