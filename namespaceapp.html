<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ThalamOS: app Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ThalamOS
   </div>
   <div id="projectbrief">a powerful Flask web application designed to enhance your storage management.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceapp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">app Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4727fbeb35bed8ec5000ba2eb4cec4a7" id="r_a4727fbeb35bed8ec5000ba2eb4cec4a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a4727fbeb35bed8ec5000ba2eb4cec4a7">index</a> ()</td></tr>
<tr class="separator:a4727fbeb35bed8ec5000ba2eb4cec4a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0844470b4684b64af95505bb5019307a" id="r_a0844470b4684b64af95505bb5019307a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a0844470b4684b64af95505bb5019307a">toggle_light</a> ()</td></tr>
<tr class="separator:a0844470b4684b64af95505bb5019307a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ed36893db95fbd9b0a74e7a3024b7db" id="r_a1ed36893db95fbd9b0a74e7a3024b7db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a1ed36893db95fbd9b0a74e7a3024b7db">create_item</a> ()</td></tr>
<tr class="separator:a1ed36893db95fbd9b0a74e7a3024b7db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19eff64b2ed5e2bdeb420adbe54acf26" id="r_a19eff64b2ed5e2bdeb420adbe54acf26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a19eff64b2ed5e2bdeb420adbe54acf26">send_creation</a> ()</td></tr>
<tr class="separator:a19eff64b2ed5e2bdeb420adbe54acf26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8435eccdbf36d30bfa5c8510b62dc8a" id="r_ac8435eccdbf36d30bfa5c8510b62dc8a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#ac8435eccdbf36d30bfa5c8510b62dc8a">item</a> (item_id)</td></tr>
<tr class="separator:ac8435eccdbf36d30bfa5c8510b62dc8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ae8e714551b2386266a1140bdcd8ab" id="r_aa2ae8e714551b2386266a1140bdcd8ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#aa2ae8e714551b2386266a1140bdcd8ab">delete_item</a> (item_id)</td></tr>
<tr class="separator:aa2ae8e714551b2386266a1140bdcd8ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3625e5c7fd60e6c1646c8c61f381ad5c" id="r_a3625e5c7fd60e6c1646c8c61f381ad5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a3625e5c7fd60e6c1646c8c61f381ad5c">search</a> (term)</td></tr>
<tr class="separator:a3625e5c7fd60e6c1646c8c61f381ad5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1016964e75f078b65663e58b99985625" id="r_a1016964e75f078b65663e58b99985625"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a1016964e75f078b65663e58b99985625">handle_exception</a> (e)</td></tr>
<tr class="separator:a1016964e75f078b65663e58b99985625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad5273500b6d83bb60387ac2747a44c3" id="r_aad5273500b6d83bb60387ac2747a44c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#aad5273500b6d83bb60387ac2747a44c3">get_env</a> ()</td></tr>
<tr class="separator:aad5273500b6d83bb60387ac2747a44c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e883fe42164b4fa992634713d860013" id="r_a7e883fe42164b4fa992634713d860013"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a7e883fe42164b4fa992634713d860013">get_weight</a> ()</td></tr>
<tr class="separator:a7e883fe42164b4fa992634713d860013"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a59a3e9e5869641503f3e98da2fd60029" id="r_a59a3e9e5869641503f3e98da2fd60029"><td class="memItemLeft" align="right" valign="top"><a id="a59a3e9e5869641503f3e98da2fd60029" name="a59a3e9e5869641503f3e98da2fd60029"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ENV_PATH</b> = os.path.join(os.path.dirname(__file__), 'data/.env')</td></tr>
<tr class="separator:a59a3e9e5869641503f3e98da2fd60029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f6539932c83e167669e366f14d835e3" id="r_a4f6539932c83e167669e366f14d835e3"><td class="memItemLeft" align="right" valign="top"><a id="a4f6539932c83e167669e366f14d835e3" name="a4f6539932c83e167669e366f14d835e3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dotenv_path</b></td></tr>
<tr class="separator:a4f6539932c83e167669e366f14d835e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e10cd27e9effe557ac2a115dc633c6" id="r_a93e10cd27e9effe557ac2a115dc633c6"><td class="memItemLeft" align="right" valign="top"><a id="a93e10cd27e9effe557ac2a115dc633c6" name="a93e10cd27e9effe557ac2a115dc633c6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>IS_SCALE_ENABLED</b> = os.getenv(&quot;IS_SCALE_ENABLED&quot;)</td></tr>
<tr class="separator:a93e10cd27e9effe557ac2a115dc633c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a675b4ea702c13dc4b8c05f985a25b496" id="r_a675b4ea702c13dc4b8c05f985a25b496"><td class="memItemLeft" align="right" valign="top"><a id="a675b4ea702c13dc4b8c05f985a25b496" name="a675b4ea702c13dc4b8c05f985a25b496"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>app</b> = Flask(__name__)</td></tr>
<tr class="separator:a675b4ea702c13dc4b8c05f985a25b496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fa7c11c7474c128736b1d34b15a0d5e" id="r_a7fa7c11c7474c128736b1d34b15a0d5e"><td class="memItemLeft" align="right" valign="top"><a id="a7fa7c11c7474c128736b1d34b15a0d5e" name="a7fa7c11c7474c128736b1d34b15a0d5e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>host</b></td></tr>
<tr class="separator:a7fa7c11c7474c128736b1d34b15a0d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a362027d4aa3246e0e0f57ebf177b0" id="r_ab4a362027d4aa3246e0e0f57ebf177b0"><td class="memItemLeft" align="right" valign="top"><a id="ab4a362027d4aa3246e0e0f57ebf177b0" name="ab4a362027d4aa3246e0e0f57ebf177b0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>debug</b></td></tr>
<tr class="separator:ab4a362027d4aa3246e0e0f57ebf177b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">StorageManager Application

This module sets up a Flask web application for managing storage items, controlling WLED devices, 
and interacting with a WiFi scale. It provides various routes for rendering templates, 
handling item creation, deletion, and search, as well as retrieving environment configurations 
and scale weight.

Routes:
    - /: Renders the search page.
    - /toggleLight: Toggles the power state of the WLED device and renders the search template.
    - /createItem: Renders the template for creating a new item.
    - /sendCreation: Handles the creation of a new item by processing the incoming JSON request data.
    - /item/&lt;item_id&gt;: Handles the request to display an item.
    - /item/&lt;item&gt;/delete: Deletes an item using the StorageConnector and renders the search.html template.
    - /search/&lt;term&gt;: Searches for a term in the storage and returns the results in JSON format.
    - /config/env: Retrieves the environment configuration.
    - /wifiscale/weight: Retrieves the weight of the scale.

Error Handling:
    - handle_exception: Handles exceptions by passing through HTTP errors.

Setup:
    - Initializes the Flask app and sets up CORS.
    - Loads environment variables from a .env file.
    - Sets up the StorageConnector within the app context.

Usage:
    Run the application using the command `python app.py`.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a1ed36893db95fbd9b0a74e7a3024b7db" name="a1ed36893db95fbd9b0a74e7a3024b7db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ed36893db95fbd9b0a74e7a3024b7db">&#9670;&#160;</a></span>create_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.create_item </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Renders the template for creating a new item.
Returns:
    Response: The rendered HTML template for creating a new item.
</pre> 
</div>
</div>
<a id="aa2ae8e714551b2386266a1140bdcd8ab" name="aa2ae8e714551b2386266a1140bdcd8ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ae8e714551b2386266a1140bdcd8ab">&#9670;&#160;</a></span>delete_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.delete_item </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>item_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Deletes an item using the StorageConnector and renders the search.html template.
Args:
    item_id: The id of the item to be deleted.
Returns:
    A rendered template for the search page.
</pre> 
</div>
</div>
<a id="aad5273500b6d83bb60387ac2747a44c3" name="aad5273500b6d83bb60387ac2747a44c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad5273500b6d83bb60387ac2747a44c3">&#9670;&#160;</a></span>get_env()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.get_env </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Retrieve the environment configuration.
This function uses the configmanager to get the current environment
configuration and returns it as a JSON response.
Returns:
    Response: A Flask JSON response containing the environment configuration.
</pre> 
</div>
</div>
<a id="a7e883fe42164b4fa992634713d860013" name="a7e883fe42164b4fa992634713d860013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e883fe42164b4fa992634713d860013">&#9670;&#160;</a></span>get_weight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.get_weight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Retrieve the weight of the scale.
This function uses the wledRequests to get the weight of the scale
Returns:
    Response: A Flask JSON response containing the weight of the scale.
</pre> 
</div>
</div>
<a id="a1016964e75f078b65663e58b99985625" name="a1016964e75f078b65663e58b99985625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1016964e75f078b65663e58b99985625">&#9670;&#160;</a></span>handle_exception()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.handle_exception </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Handles exceptions by passing through HTTP errors.
Parameters:
e (Exception): The exception to handle.
Returns:
Exception: The same exception that was passed in.
</pre> 
</div>
</div>
<a id="a4727fbeb35bed8ec5000ba2eb4cec4a7" name="a4727fbeb35bed8ec5000ba2eb4cec4a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4727fbeb35bed8ec5000ba2eb4cec4a7">&#9670;&#160;</a></span>index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.index </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Renders the search page.
Returns:
    Response: The rendered HTML template for the search page.
</pre> 
</div>
</div>
<a id="ac8435eccdbf36d30bfa5c8510b62dc8a" name="ac8435eccdbf36d30bfa5c8510b62dc8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8435eccdbf36d30bfa5c8510b62dc8a">&#9670;&#160;</a></span>item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.item </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>item_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Handles the request to display an item.
This function performs the following steps:
1. Changes the power state of the WLED device to on.
2. Fetches the item details from the storage using the provided item identifier.
3. Sets the color position on the WLED device based on the fetched item details.
4. If the fetched item contains additional information,
   it parses the data and renders the 'item.jinja2' template
   with the item details and information.
6. If the fetched item does not contain additional information,
   it renders the 'item.jinja2' template with only the item details.
Args:
    item_id (int): The id of the item to display.
Returns:
    The rendered HTML template for the item.
</pre> 
</div>
</div>
<a id="a3625e5c7fd60e6c1646c8c61f381ad5c" name="a3625e5c7fd60e6c1646c8c61f381ad5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3625e5c7fd60e6c1646c8c61f381ad5c">&#9670;&#160;</a></span>search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.search </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>term</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Search for a term in the storage and return the results in JSON format.
Args:
    term (str): The term to search for in the storage.
Returns:
    Response: A Flask Response object containing the search results in JSON format.
</pre> 
</div>
</div>
<a id="a19eff64b2ed5e2bdeb420adbe54acf26" name="a19eff64b2ed5e2bdeb420adbe54acf26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19eff64b2ed5e2bdeb420adbe54acf26">&#9670;&#160;</a></span>send_creation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.send_creation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Handle the creation of a new item by processing the incoming JSON request data.
The function expects a JSON payload with the following structure:
{
    "info": &lt;json&gt;,
    "type": &lt;str&gt;,
    "name": &lt;str&gt;,
    "position": &lt;str&gt;
}
It extracts the necessary information from the JSON payload and attempts to create a new item
using the StorageConnector.CreateItem method. 
If an exception occurs during the creation process,
it prints the exception.
Returns:
    tuple: A dictionary with a status message and an HTTP status code.
</pre> 
</div>
</div>
<a id="a0844470b4684b64af95505bb5019307a" name="a0844470b4684b64af95505bb5019307a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0844470b4684b64af95505bb5019307a">&#9670;&#160;</a></span>toggle_light()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.toggle_light </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Toggles the power state of the WLED device and renders the search template.
This function changes the power state of the WLED device to the opposite of its current state
by calling the `changePowerState` method of the `wledRequests` object.
After toggling the power state,
it returns the rendered "search.html" template.
Returns:
    str: The rendered "search.html" template.
</pre> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceapp.html">app</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
