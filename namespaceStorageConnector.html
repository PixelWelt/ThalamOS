<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ThalamOS: StorageConnector Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ThalamOS
   </div>
   <div id="projectbrief">a powerful Flask web application designed to enhance your storage management.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceStorageConnector.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">StorageConnector Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3e57ab684726c196f9d27e87e4212176" id="r_a3e57ab684726c196f9d27e87e4212176"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceStorageConnector.html#a3e57ab684726c196f9d27e87e4212176">setup</a> ()</td></tr>
<tr class="separator:a3e57ab684726c196f9d27e87e4212176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96dd63444454838ba951e91b2b31bd1a" id="r_a96dd63444454838ba951e91b2b31bd1a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceStorageConnector.html#a96dd63444454838ba951e91b2b31bd1a">fetch_csv</a> ()</td></tr>
<tr class="separator:a96dd63444454838ba951e91b2b31bd1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfc4115262f494896562e8b1be07ef66" id="r_acfc4115262f494896562e8b1be07ef66"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceStorageConnector.html#acfc4115262f494896562e8b1be07ef66">fetch_item</a> (item_id)</td></tr>
<tr class="separator:acfc4115262f494896562e8b1be07ef66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a592f10db41c720fb67b6005cd380c507" id="r_a592f10db41c720fb67b6005cd380c507"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceStorageConnector.html#a592f10db41c720fb67b6005cd380c507">delete_item</a> (item_id)</td></tr>
<tr class="separator:a592f10db41c720fb67b6005cd380c507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f91c55bfa838d16b21ec8ef7923a5f0" id="r_a0f91c55bfa838d16b21ec8ef7923a5f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceStorageConnector.html#a0f91c55bfa838d16b21ec8ef7923a5f0">create_item</a> (pos, typ, name, json_data)</td></tr>
<tr class="separator:a0f91c55bfa838d16b21ec8ef7923a5f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a602167f1f13e6b1e03d1f3e5b0654110" id="r_a602167f1f13e6b1e03d1f3e5b0654110"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceStorageConnector.html#a602167f1f13e6b1e03d1f3e5b0654110">search</a> (search_term)</td></tr>
<tr class="separator:a602167f1f13e6b1e03d1f3e5b0654110"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a418445de0629ef446798018c9f020d97" id="r_a418445de0629ef446798018c9f020d97"><td class="memItemLeft" align="right" valign="top"><a id="a418445de0629ef446798018c9f020d97" name="a418445de0629ef446798018c9f020d97"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>db_path</b> = os.path.join(os.path.dirname(__file__), 'data/storage.db')</td></tr>
<tr class="separator:a418445de0629ef446798018c9f020d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb69a41184bd102cefaf75b2c25940c7" id="r_acb69a41184bd102cefaf75b2c25940c7"><td class="memItemLeft" align="right" valign="top"><a id="acb69a41184bd102cefaf75b2c25940c7" name="acb69a41184bd102cefaf75b2c25940c7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>mydb</b> = sqlite3.connect(db_path, check_same_thread=False)</td></tr>
<tr class="separator:acb69a41184bd102cefaf75b2c25940c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7f7cb342dcd50398736d8e136fa07cf" id="r_ae7f7cb342dcd50398736d8e136fa07cf"><td class="memItemLeft" align="right" valign="top"><a id="ae7f7cb342dcd50398736d8e136fa07cf" name="ae7f7cb342dcd50398736d8e136fa07cf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>cursor</b> = mydb.cursor()</td></tr>
<tr class="separator:ae7f7cb342dcd50398736d8e136fa07cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">StorageConnector Module

This module provides functions to interact with a SQLite database for managing storage items.
It includes functionalities to set up the database, create, fetch, delete, and search items,
as well as export the data to a CSV file.

Functions:
- setup(): Sets up the database by creating the 'storage' table and
  a trigger for automatic updating of the 'modification_time' column.
- fetch_csv(): Fetches all data from the 'storage' table and 
  writes it to a CSV file named 'out.csv'.
- fetch_item(item_id): Fetches an item from the storage database by its id.
- delete_item(item_id): Deletes an item from the storage database based on the provided item id.
- create_item(pos, typ, name, jsonData): Creates an item in the storage database.
- search(search_term): Searches the storage database for entries that match the given search term.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a0f91c55bfa838d16b21ec8ef7923a5f0" name="a0f91c55bfa838d16b21ec8ef7923a5f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f91c55bfa838d16b21ec8ef7923a5f0">&#9670;&#160;</a></span>create_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StorageConnector.create_item </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>typ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>json_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Creates an item in the storage database.
Args:
    pos (int): The position of the item.
    typ (str): The type of the item.
    name (str): The name of the item.
    jsonData (str): The JSON data associated with the item. If empty JSON object ("{}"),
    no additional info is stored.
Returns:
    None
</pre> 
</div>
</div>
<a id="a592f10db41c720fb67b6005cd380c507" name="a592f10db41c720fb67b6005cd380c507"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a592f10db41c720fb67b6005cd380c507">&#9670;&#160;</a></span>delete_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StorageConnector.delete_item </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>item_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Deletes an item from the storage database based on the provided item id.
Args:
    itemID (int): The id of the item to be deleted from the storage.
Returns:
    None
</pre> 
</div>
</div>
<a id="a96dd63444454838ba951e91b2b31bd1a" name="a96dd63444454838ba951e91b2b31bd1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96dd63444454838ba951e91b2b31bd1a">&#9670;&#160;</a></span>fetch_csv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StorageConnector.fetch_csv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Fetches all data from the 'storage' table in the database and 
writes it to a CSV file named 'out.csv'.
The function executes a SQL query to select all rows from the 
'storage' table, writes the column headers
and all rows to the CSV file, and saves the file with UTF-8 encoding.
Raises:
    Any exceptions raised by the database cursor execution or file operations.
</pre> 
</div>
</div>
<a id="acfc4115262f494896562e8b1be07ef66" name="acfc4115262f494896562e8b1be07ef66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc4115262f494896562e8b1be07ef66">&#9670;&#160;</a></span>fetch_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StorageConnector.fetch_item </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>item_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Fetch an item from the storage database by its id.
Args:
    itemID (int): The id of the item to fetch.
Returns:
    tuple: A tuple containing the item's data if found, otherwise None.
</pre> 
</div>
</div>
<a id="a602167f1f13e6b1e03d1f3e5b0654110" name="a602167f1f13e6b1e03d1f3e5b0654110"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a602167f1f13e6b1e03d1f3e5b0654110">&#9670;&#160;</a></span>search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StorageConnector.search </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_term</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Searches the storage database for entries that match the given search term.
Args:
    searchTerm (str): The term to search for in the database. The term will be split 
                      into individual words,
                      and each word will be used to search the 'type', 'name', and 
                      'info' columns.
Returns:
    list: A list of tuples containing the rows from the database that match the search criteria.
          Returns None if there is an SQLite programming error.
Raises:
    sqlite3.ProgrammingError: If there is an error executing the query.
</pre> 
</div>
</div>
<a id="a3e57ab684726c196f9d27e87e4212176" name="a3e57ab684726c196f9d27e87e4212176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e57ab684726c196f9d27e87e4212176">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StorageConnector.setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sets up the database by creating the 'storage' table and a trigger for automatic 
updating of the 'modification_time' column.
The 'storage' table contains the following columns:
- id: INTEGER, primary key, autoincrement
- position: INTEGER
- type: TEXT
- name: TEXT
- info: TEXT
- modification_time: TIMESTAMP, defaults to the current timestamp
The trigger 'update_modification_time' ensures that the 'modification_time' column 
is automatically updated to the current timestamp whenever a row in the 'storage' 
table is updated.
Commits the changes to the database and prints a confirmation message.
</pre> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceStorageConnector.html">StorageConnector</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
