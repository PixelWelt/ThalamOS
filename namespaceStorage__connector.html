<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ThalamOS: Storage_connector Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ThalamOS
   </div>
   <div id="projectbrief">a powerful Flask web application designed to enhance your storage management.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespaceStorage__connector.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Storage_connector Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aafa8ffb7809aa3ef44ee89855067eef4" id="r_aafa8ffb7809aa3ef44ee89855067eef4"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aafa8ffb7809aa3ef44ee89855067eef4">setup</a> ()</td></tr>
<tr class="separator:aafa8ffb7809aa3ef44ee89855067eef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac19bb6ab6e13a6787cdd1595367d61cd" id="r_ac19bb6ab6e13a6787cdd1595367d61cd"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac19bb6ab6e13a6787cdd1595367d61cd">fetch_csv</a> ()</td></tr>
<tr class="separator:ac19bb6ab6e13a6787cdd1595367d61cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9ef5fceb894ceceab4ab8ff2c23c90b" id="r_ac9ef5fceb894ceceab4ab8ff2c23c90b"><td class="memItemLeft" align="right" valign="top">Annotated[tuple, &quot;tuple containing the item's data if found, otherwise None&quot;]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac9ef5fceb894ceceab4ab8ff2c23c90b">fetch_item</a> (item_id)</td></tr>
<tr class="separator:ac9ef5fceb894ceceab4ab8ff2c23c90b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5db0c7074c7f024ca28e501598863c3" id="r_ac5db0c7074c7f024ca28e501598863c3"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac5db0c7074c7f024ca28e501598863c3">delete_item</a> (item_id)</td></tr>
<tr class="separator:ac5db0c7074c7f024ca28e501598863c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8d506980d0690835598342c10b574a" id="r_abc8d506980d0690835598342c10b574a"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc8d506980d0690835598342c10b574a">create_item</a> (pos, obj_type, name, json_data)</td></tr>
<tr class="separator:abc8d506980d0690835598342c10b574a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5389b4171d60c4f986084f96fba404d" id="r_ab5389b4171d60c4f986084f96fba404d"><td class="memItemLeft" align="right" valign="top">Annotated[ list, &quot;list of tuples containing the rows from the database that match the search criteria&quot;,]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5389b4171d60c4f986084f96fba404d">search</a> (search_term)</td></tr>
<tr class="separator:ab5389b4171d60c4f986084f96fba404d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae944c67f73d1d668f527caa990370f96" id="r_ae944c67f73d1d668f527caa990370f96"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae944c67f73d1d668f527caa990370f96">update_item</a> (item_id, pos, obj_type, name, json_data)</td></tr>
<tr class="separator:ae944c67f73d1d668f527caa990370f96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4c76998b33297de804b47714a32986b0" id="r_a4c76998b33297de804b47714a32986b0"><td class="memItemLeft" align="right" valign="top">Annotated&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c76998b33297de804b47714a32986b0">db_path</a></td></tr>
<tr class="separator:a4c76998b33297de804b47714a32986b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7beadb7474977c5afbede5eedc2ba2" id="r_acb7beadb7474977c5afbede5eedc2ba2"><td class="memItemLeft" align="right" valign="top">Annotated&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb7beadb7474977c5afbede5eedc2ba2">mydb</a></td></tr>
<tr class="separator:acb7beadb7474977c5afbede5eedc2ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8bee1147588222d4166cc6172aedf86" id="r_ae8bee1147588222d4166cc6172aedf86"><td class="memItemLeft" align="right" valign="top">Annotated&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae8bee1147588222d4166cc6172aedf86">cursor</a> = mydb.cursor()</td></tr>
<tr class="separator:ae8bee1147588222d4166cc6172aedf86"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">StorageConnector Module

This module provides functions to interact with a SQLite database for managing storage items.
It includes functionalities to set up the database, create, fetch, delete, and search items,
as well as export the data to a CSV file.

Functions:
- setup(): Sets up the database by creating the 'storage' table and
  a trigger for automatic updating of the 'modification_time' column.
- fetch_csv(): Fetches all data from the 'storage' table and
  writes it to a CSV file named 'out.csv'.
- fetch_item(item_id): Fetches an item from the storage database by its id.
- delete_item(item_id): Deletes an item from the storage database based on the provided item id.
- create_item(pos, typ, name, jsonData): Creates an item in the storage database.
- search(search_term): Searches the storage database for entries that match the given search term.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="abc8d506980d0690835598342c10b574a" name="abc8d506980d0690835598342c10b574a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc8d506980d0690835598342c10b574a">&#9670;&#160;</a></span>create_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None Storage_connector.create_item </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>pos</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>obj_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>json_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Creates an item in the storage database.
Args:
    pos (int): The position of the item.
    typ (str): The type of the item.
    name (str): The name of the item.
    jsonData (str): The JSON data associated with the item. If empty JSON object ("{}"),
    no additional info is stored.
Returns:
    None
</pre> 
<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00128">128</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  128</span><span class="keyword">def </span>create_item(pos, obj_type, name, json_data) -&gt; None:</div>
<div class="line"><span class="lineno">  129</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  130</span><span class="stringliteral">    Creates an item in the storage database.</span></div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">        pos (int): The position of the item.</span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">        typ (str): The type of the item.</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral">        name (str): The name of the item.</span></div>
<div class="line"><span class="lineno">  135</span><span class="stringliteral">        jsonData (str): The JSON data associated with the item. If empty JSON object (&quot;{}&quot;),</span></div>
<div class="line"><span class="lineno">  136</span><span class="stringliteral">        no additional info is stored.</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">        None</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>    logger.info(</div>
<div class="line"><span class="lineno">  142</span>        <span class="stringliteral">&quot;Creating item with position: {}, type: {}, name: {}, json_data: {}&quot;</span>,</div>
<div class="line"><span class="lineno">  143</span>        pos,</div>
<div class="line"><span class="lineno">  144</span>        obj_type,</div>
<div class="line"><span class="lineno">  145</span>        name,</div>
<div class="line"><span class="lineno">  146</span>        json_data,</div>
<div class="line"><span class="lineno">  147</span>    )</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">if</span> json_data == <span class="stringliteral">&quot;{}&quot;</span>:</div>
<div class="line"><span class="lineno">  149</span>        query = <span class="stringliteral">&quot;INSERT INTO storage (position, type, name) VALUES (?, ?, ?);&quot;</span></div>
<div class="line"><span class="lineno">  150</span>        params = (pos, obj_type, name)</div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  152</span>        query = <span class="stringliteral">&quot;INSERT INTO storage (position, type, name, info) VALUES (?, ?, ?, ?);&quot;</span></div>
<div class="line"><span class="lineno">  153</span>        params = (pos, obj_type, name, json_data)</div>
<div class="line"><span class="lineno">  154</span>    logger.debug(f<span class="stringliteral">&quot;Executing query: {query} with params: {params}&quot;</span>)</div>
<div class="line"><span class="lineno">  155</span>    cursor.execute(query, params)</div>
<div class="line"><span class="lineno">  156</span>    mydb.commit()</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac5db0c7074c7f024ca28e501598863c3" name="ac5db0c7074c7f024ca28e501598863c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5db0c7074c7f024ca28e501598863c3">&#9670;&#160;</a></span>delete_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None Storage_connector.delete_item </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>item_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Deletes an item from the storage database based on the provided item id.
Args:
    itemID (int): The id of the item to be deleted from the storage.
Returns:
    None
</pre> 
<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00115">115</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  115</span><span class="keyword">def </span>delete_item(item_id) -&gt; None:</div>
<div class="line"><span class="lineno">  116</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral">    Deletes an item from the storage database based on the provided item id.</span></div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  119</span><span class="stringliteral">        itemID (int): The id of the item to be deleted from the storage.</span></div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral">        None</span></div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    cursor.execute(<span class="stringliteral">&quot;DELETE FROM storage WHERE ID=?;&quot;</span>, (item_id,))</div>
<div class="line"><span class="lineno">  125</span>    mydb.commit()</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac19bb6ab6e13a6787cdd1595367d61cd" name="ac19bb6ab6e13a6787cdd1595367d61cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac19bb6ab6e13a6787cdd1595367d61cd">&#9670;&#160;</a></span>fetch_csv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None Storage_connector.fetch_csv </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Fetches all data from the 'storage' table in the database and
writes it to a CSV file named 'out.csv'.
The function executes a SQL query to select all rows from the
'storage' table, writes the column headers
and all rows to the CSV file, and saves the file with UTF-8 encoding.
Raises:
    Any exceptions raised by the database cursor execution or file operations.
</pre> 
<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00082">82</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span><span class="keyword">def </span>fetch_csv() -&gt; None:</div>
<div class="line"><span class="lineno">   83</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">    Fetches all data from the &#39;storage&#39; table in the database and</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">    writes it to a CSV file named &#39;out.csv&#39;.</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">    The function executes a SQL query to select all rows from the</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">    &#39;storage&#39; table, writes the column headers</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">    and all rows to the CSV file, and saves the file with UTF-8 encoding.</span></div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">        Any exceptions raised by the database cursor execution or file operations.</span></div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    cursor.execute(<span class="stringliteral">&quot;SELECT * FROM storage;&quot;</span>)</div>
<div class="line"><span class="lineno">   94</span>    <span class="keyword">with</span> open(<span class="stringliteral">&quot;static/database.csv&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>, newline=<span class="stringliteral">&quot;&quot;</span>, encoding=<span class="stringliteral">&quot;utf-8&quot;</span>) <span class="keyword">as</span> csv_file:</div>
<div class="line"><span class="lineno">   95</span>        csv_writer = csv.writer(csv_file)</div>
<div class="line"><span class="lineno">   96</span>        csv_writer.writerow([i[0] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> cursor.description])</div>
<div class="line"><span class="lineno">   97</span>        csv_writer.writerows(cursor.fetchall())</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9ef5fceb894ceceab4ab8ff2c23c90b" name="ac9ef5fceb894ceceab4ab8ff2c23c90b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9ef5fceb894ceceab4ab8ff2c23c90b">&#9670;&#160;</a></span>fetch_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[tuple, &quot;tuple containing the item's data if found, otherwise None&quot;] Storage_connector.fetch_item </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>item_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Fetch an item from the storage database by its id.
Args:
    itemID (int): The id of the item to fetch.
Returns:
    tuple: A tuple containing the item's data if found, otherwise None.
</pre> 
<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00100">100</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  102</span>) -&gt; Annotated[tuple, <span class="stringliteral">&quot;tuple containing the item&#39;s data if found, otherwise None&quot;</span>]:</div>
<div class="line"><span class="lineno">  103</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  104</span><span class="stringliteral">    Fetch an item from the storage database by its id.</span></div>
<div class="line"><span class="lineno">  105</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  106</span><span class="stringliteral">        itemID (int): The id of the item to fetch.</span></div>
<div class="line"><span class="lineno">  107</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  108</span><span class="stringliteral">        tuple: A tuple containing the item&#39;s data if found, otherwise None.</span></div>
<div class="line"><span class="lineno">  109</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>    cursor.execute(<span class="stringliteral">&quot;select * From storage WHERE id=?;&quot;</span>, (item_id,))</div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">return</span> cursor.fetchone()</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5389b4171d60c4f986084f96fba404d" name="ab5389b4171d60c4f986084f96fba404d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5389b4171d60c4f986084f96fba404d">&#9670;&#160;</a></span>search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Annotated[
    list,
    &quot;list of tuples containing the rows from the database that match the search criteria&quot;,
] Storage_connector.search </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>search_term</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Searches the storage database for entries that match the given search term.
Args:
    searchTerm (str): The term to search for in the database. The term will be split
                      into individual words,
                      and each word will be used to search the 'type', 'name', and
                      'info' columns.
Returns:
    list: A list of tuples containing the rows from the database that match the search criteria.
          Returns None if there is an SQLite programming error.
Raises:
    sqlite3.ProgrammingError: If there is an error executing the query.
</pre> 
<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00159">159</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  164</span>]:</div>
<div class="line"><span class="lineno">  165</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">    Searches the storage database for entries that match the given search term.</span></div>
<div class="line"><span class="lineno">  167</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  168</span><span class="stringliteral">        searchTerm (str): The term to search for in the database. The term will be split</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral">                          into individual words,</span></div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">                          and each word will be used to search the &#39;type&#39;, &#39;name&#39;, and</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">                          &#39;info&#39; columns.</span></div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral">        list: A list of tuples containing the rows from the database that match the search criteria.</span></div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral">              Returns None if there is an SQLite programming error.</span></div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral">        sqlite3.ProgrammingError: If there is an error executing the query.</span></div>
<div class="line"><span class="lineno">  177</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  179</span>        <span class="comment"># Split searchTerm into single words</span></div>
<div class="line"><span class="lineno">  180</span>        search_terms = search_term.split()</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>        <span class="comment"># create statement with placeholders for each search term</span></div>
<div class="line"><span class="lineno">  183</span>        conditions = <span class="stringliteral">&quot; AND &quot;</span>.join(</div>
<div class="line"><span class="lineno">  184</span>            [<span class="stringliteral">&quot;(type LIKE ? OR name LIKE ? OR info LIKE ?)&quot;</span> <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> search_terms]</div>
<div class="line"><span class="lineno">  185</span>        )</div>
<div class="line"><span class="lineno">  186</span>        query = f<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  187</span><span class="stringliteral">        SELECT *</span></div>
<div class="line"><span class="lineno">  188</span><span class="stringliteral">        FROM storage</span></div>
<div class="line"><span class="lineno">  189</span><span class="stringliteral">        WHERE {conditions};</span></div>
<div class="line"><span class="lineno">  190</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>        <span class="comment"># create parameters for each placeholder</span></div>
<div class="line"><span class="lineno">  193</span>        parameters = tuple(f<span class="stringliteral">&quot;%{term}%&quot;</span> <span class="keywordflow">for</span> term <span class="keywordflow">in</span> search_terms <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(3))</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>        <span class="comment"># Debugging: print query and parameters</span></div>
<div class="line"><span class="lineno">  196</span>        logger.debug(f<span class="stringliteral">&quot;Executing search query: {query} with parameters: {parameters}&quot;</span>)</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>        cursor.execute(query, parameters)</div>
<div class="line"><span class="lineno">  199</span>        results = cursor.fetchall()</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>        <span class="keywordflow">return</span> results</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">except</span> sqlite3.ProgrammingError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  204</span>        logger.error(f<span class="stringliteral">&quot;SQLite-Error: {str(e)}&quot;</span>)</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aafa8ffb7809aa3ef44ee89855067eef4" name="aafa8ffb7809aa3ef44ee89855067eef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafa8ffb7809aa3ef44ee89855067eef4">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None Storage_connector.setup </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sets up the database by creating the 'storage' table and a trigger for automatic
updating of the 'modification_time' column.
The 'storage' table contains the following columns:
- id: INTEGER, primary key, autoincrement
- position: INTEGER
- type: sensor | screw | display | nail | display | cable | miscellaneous | Motor Driver
- name: TEXT
- info: TEXT
- modification_time: TIMESTAMP, defaults to the current timestamp
The trigger 'update_modification_time' ensures that the 'modification_time' column
is automatically updated to the current timestamp whenever a row in the 'storage'
table is updated.
Commits the changes to the database and prints a confirmation message.
</pre> 
<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00036">36</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span><span class="keyword">def </span>setup() -&gt; None:</div>
<div class="line"><span class="lineno">   37</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   38</span><span class="stringliteral">    Sets up the database by creating the &#39;storage&#39; table and a trigger for automatic</span></div>
<div class="line"><span class="lineno">   39</span><span class="stringliteral">    updating of the &#39;modification_time&#39; column.</span></div>
<div class="line"><span class="lineno">   40</span><span class="stringliteral">    The &#39;storage&#39; table contains the following columns:</span></div>
<div class="line"><span class="lineno">   41</span><span class="stringliteral">    - id: INTEGER, primary key, autoincrement</span></div>
<div class="line"><span class="lineno">   42</span><span class="stringliteral">    - position: INTEGER</span></div>
<div class="line"><span class="lineno">   43</span><span class="stringliteral">    - type: sensor | screw | display | nail | display | cable | miscellaneous | Motor Driver</span></div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral">    - name: TEXT</span></div>
<div class="line"><span class="lineno">   45</span><span class="stringliteral">    - info: TEXT</span></div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral">    - modification_time: TIMESTAMP, defaults to the current timestamp</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral">    The trigger &#39;update_modification_time&#39; ensures that the &#39;modification_time&#39; column</span></div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">    is automatically updated to the current timestamp whenever a row in the &#39;storage&#39;</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">    table is updated.</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">    Commits the changes to the database and prints a confirmation message.</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   52</span>    cursor.execute(</div>
<div class="line"><span class="lineno">   53</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    CREATE TABLE IF NOT EXISTS storage (</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">        id INTEGER PRIMARY KEY AUTOINCREMENT,</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">        position INTEGER,</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">        type TEXT,</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral">        name TEXT,</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">        info TEXT,</span></div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">        modification_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral">    );</span></div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   63</span>    )</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>    <span class="comment"># trigger for automatic update of modification_time</span></div>
<div class="line"><span class="lineno">   66</span>    cursor.execute(</div>
<div class="line"><span class="lineno">   67</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">    CREATE TRIGGER IF NOT EXISTS update_modification_time</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">    AFTER UPDATE ON storage</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral">    FOR EACH ROW</span></div>
<div class="line"><span class="lineno">   71</span><span class="stringliteral">    BEGIN</span></div>
<div class="line"><span class="lineno">   72</span><span class="stringliteral">        UPDATE storage</span></div>
<div class="line"><span class="lineno">   73</span><span class="stringliteral">        SET modification_time = CURRENT_TIMESTAMP</span></div>
<div class="line"><span class="lineno">   74</span><span class="stringliteral">        WHERE id = OLD.id;</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">    END;</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   77</span>    )</div>
<div class="line"><span class="lineno">   78</span>    mydb.commit()</div>
<div class="line"><span class="lineno">   79</span>    logger.info(<span class="stringliteral">&quot;Database setup complete and ready for service&quot;</span>)</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae944c67f73d1d668f527caa990370f96" name="ae944c67f73d1d668f527caa990370f96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae944c67f73d1d668f527caa990370f96">&#9670;&#160;</a></span>update_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None Storage_connector.update_item </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>item_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>pos</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>obj_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>json_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Updates an item in the storage database.
Args:
    item_id (int): The id of the item to update.
    pos (int): The new position of the item.
    obj_type (str): The new type of the item.
    name (str): The new name of the item.
    json_data (str): The new JSON data associated with the item.
Returns:
    None
</pre> 
<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00208">208</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  208</span><span class="keyword">def </span>update_item(item_id, pos, obj_type, name, json_data) -&gt; None:</div>
<div class="line"><span class="lineno">  209</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral">    Updates an item in the storage database.</span></div>
<div class="line"><span class="lineno">  211</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral">        item_id (int): The id of the item to update.</span></div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">        pos (int): The new position of the item.</span></div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral">        obj_type (str): The new type of the item.</span></div>
<div class="line"><span class="lineno">  215</span><span class="stringliteral">        name (str): The new name of the item.</span></div>
<div class="line"><span class="lineno">  216</span><span class="stringliteral">        json_data (str): The new JSON data associated with the item.</span></div>
<div class="line"><span class="lineno">  217</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  218</span><span class="stringliteral">        None</span></div>
<div class="line"><span class="lineno">  219</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  220</span>    logger.info(</div>
<div class="line"><span class="lineno">  221</span>        <span class="stringliteral">&quot;Updating item with id: {}, position: {}, type: {}, name: {}, json_data: {}&quot;</span>,</div>
<div class="line"><span class="lineno">  222</span>        item_id,</div>
<div class="line"><span class="lineno">  223</span>        pos,</div>
<div class="line"><span class="lineno">  224</span>        obj_type,</div>
<div class="line"><span class="lineno">  225</span>        name,</div>
<div class="line"><span class="lineno">  226</span>        json_data,</div>
<div class="line"><span class="lineno">  227</span>    )</div>
<div class="line"><span class="lineno">  228</span>    query = <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  229</span><span class="stringliteral">        UPDATE storage</span></div>
<div class="line"><span class="lineno">  230</span><span class="stringliteral">        SET position = ?, type = ?, name = ?, info = ?</span></div>
<div class="line"><span class="lineno">  231</span><span class="stringliteral">        WHERE id = ?;</span></div>
<div class="line"><span class="lineno">  232</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  233</span>    params = (pos, obj_type, name, json_data, item_id)</div>
<div class="line"><span class="lineno">  234</span>    logger.debug(f<span class="stringliteral">&quot;Executing query: {query} with params: {params}&quot;</span>)</div>
<div class="line"><span class="lineno">  235</span>    cursor.execute(query, params)</div>
<div class="line"><span class="lineno">  236</span>    mydb.commit()</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae8bee1147588222d4166cc6172aedf86" name="ae8bee1147588222d4166cc6172aedf86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8bee1147588222d4166cc6172aedf86">&#9670;&#160;</a></span>cursor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Annotated Storage_connector.cursor = mydb.cursor()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00033">33</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>

</div>
</div>
<a id="a4c76998b33297de804b47714a32986b0" name="a4c76998b33297de804b47714a32986b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c76998b33297de804b47714a32986b0">&#9670;&#160;</a></span>db_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Annotated Storage_connector.db_path</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  os.path.join(</div>
<div class="line"><span class="lineno">    2</span>    os.path.dirname(__file__), <span class="stringliteral">&quot;data/storage.db&quot;</span></div>
<div class="line"><span class="lineno">    3</span>)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00026">26</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>

</div>
</div>
<a id="acb7beadb7474977c5afbede5eedc2ba2" name="acb7beadb7474977c5afbede5eedc2ba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7beadb7474977c5afbede5eedc2ba2">&#9670;&#160;</a></span>mydb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Annotated Storage_connector.mydb</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  sqlite3.connect(</div>
<div class="line"><span class="lineno">    2</span>    db_path, check_same_thread=<span class="keyword">False</span></div>
<div class="line"><span class="lineno">    3</span>)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="Storage__connector_8py_source.html#l00030">30</a> of file <a class="el" href="Storage__connector_8py_source.html">Storage_connector.py</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceStorage__connector.html">Storage_connector</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
